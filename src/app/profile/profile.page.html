<ion-header>
  <ion-toolbar>
      <ion-title>
        <a style="color: #B1C634; width:50%" routerLink="/Profile">Profile</a> <a style="width:50%" routerLink="/Matches">Matches</a> 
      </ion-title>
  </ion-toolbar>
</ion-header>
<ion-content padding fullscreen="true">
  <ion-avatar>
     <img src={{img}} *ngIf="loaded" /><br />
  </ion-avatar>
  <div *ngIf="loaded" style="Text-align:center">{{school}}</div>
  <div style="width:100%;Text-align:center; font-size: 20px; font-weight:700; font-size:120%">
      <p>{{user | uppercase}}</p>
  </div>
  <br />
  <!-- <ion-content>
    <img>
    <ion-fab vertical="bottom" horizontal="center" slot="fixed">
      <ion-fab-button>
        <ion-icon name="camera"></ion-icon>
      </ion-fab-button>
    </ion-fab>
  </ion-content> -->
  <a button icon-start ion-button full (click)="openCamera()">
    <ion-icon name="camera"></ion-icon>
    <i class="icon ion-ios-telephone"></i>
  </a>
  <div>
  <ion-button [hidden]='open' size="small" id="startButton" (click)="camOpen()">Take Photo</ion-button>
  <ion-button [hidden]='!open' size="small" id="resetButton" (click)="camClose()">Close</ion-button>
  </div>
  <div [hidden]='!open' id="sourceSelectPanel" style="display:none">
    <select id="sourceSelect" style="max-width:400px">
    </select>
  </div>
  <div *ngIf='open'>
    <video id="video" width="300" height="200" style="border: 1px solid gray"></video>
  </div>

  <a style="color:176ACC; font-weight:700;">
  PENDING OFFERS:
  </a>
  <ion-list>
     <ion-item *ngFor="let offer of offers; let i = index">
        {{offer.peer}} is offering {{offer.peerTitles}} and would like {{offer.myTitles}}
        <ion-button (click)="acceptOffer(i)" size="small" style="float: right;">Accept</ion-button>
        <ion-button (click)="rejectOffer(i)" size="small" style="float: right;">Reject</ion-button>
        <ion-button (click)="openCounterOfferModal()" size="small" style="float: right;">Counter</ion-button>
      </ion-item>
  </ion-list>
  <br />
  <a style="color:176ACC; font-weight:700;">
  I'M LOOKING FOR:
  </a>
  <ion-button size="small" style="font-weight:700; background-color: #B1C634; width:10%" (click)="openWantListModal()" style="float: right;"> + </ion-button>
  <!-- <ion-button size="small" style="font-weight:700;" (click)="openAddListingModal()" style="float: right;"> Edit </ion-button> -->
  <ion-list>
     <ion-item *ngFor="let want of wants">
        <ion-thumbnail slot="start">
            <img
              [src]="want.image_link === null ? '../../assets/img/biblio-logo-noBG-small-07.png' : want.image_link " />
        </ion-thumbnail>
        <ion-label>
            <b>Title:</b> {{want.title}}<br />
            <b>ISBN:</b> {{want.isbn}}
        </ion-label>
        <ion-button size="small" style="font-weight:700; background-color: rgb(173, 197, 35); width:10%" (click)="deleteBookAlert(deleteWant, want.id_want, 'want listing')" style="float: right;">  -  </ion-button>
        <!-- <ion-button size="small" style="font-weight:700; background-color: rgb(173, 197, 35); width:10%" (click)="deleteBookAlert(deleteWant(want.id_want, 'want listing'))" style="float: right;">  -  </ion-button> -->
        <!-- <ion-icon name="remove-circle-outline" (click)="deleteWant(want.id_want, 'want listing')"></ion-icon> -->
      </ion-item>
  </ion-list>
  <br />
  <a style="color:176ACC; font-weight:700;">
  I'M OFFERING:
  </a>
  <ion-button size="small" style="font-weight:700; background-color: #B1C634; width:10%" (click)="openAddListingModal()" style="float: right;"> + </ion-button>
  <!-- <ion-button size="small" style="font-weight:700;" (click)="openAddListingModal()" style="float: right;"> Edit </ion-button> -->
  <ion-list>
     <ion-item *ngFor="let listing of listings">
        <ion-thumbnail slot="start">
            <img [src]="listing.book.image_link === null ? '../../assets/img/biblio-logo-noBG-small-07.png' : listing.book.image_link " />
        </ion-thumbnail>
        <ion-label>
            <b>Title:</b> {{listing.book.title}}<br />
            <b>Condition:</b> {{listing.book.condition}}<br />
            <b>ISBN:</b> {{listing.book.isbn}}<br />
        </ion-label>
        <ion-button size="small" style="font-weight:700; background-color: rgb(173, 197, 35); width:10%" (click)="deleteBookAlert(deleteListing(listing.id_book, listing.id_listing, 'offer listing'))" style="float: right;">  -  </ion-button>
        <!-- <ion-icon name="remove-circle-outline" (click)="deleteListing(listing.id_book, listing.id_listing, 'offer listing')" style="float: right;"></ion-icon> -->
        <!-- Value: {{listing.value}} -->
      </ion-item>
  </ion-list>
  <br/>
  <a style="color:176ACC; font-weight:700;">
  ACCEPTED OFFERS:
  </a>
  <ion-list>
     <ion-item *ngFor="let offer of acceptedOffs; let i = index">
        {{offer.peer}} is offering {{offer.peerTitles}} and would like {{offer.myTitles}}
        <ion-button (click)="cancelAcceptedOffer(i)" style="float: right;">Cancel</ion-button>
      </ion-item>
  </ion-list>
  <br />
  <div class="col-xs-12 buttons">
      <a href="https://connect.stripe.com/oauth/authorize?response_type=code&client_id=ca_E5tfHJicmsEM7yImGKJv30DqYfd2koHB&scope=read_write"
        class="stripe-connect light-blue dark"><span>Connect with Stripe</span></a>
    </div>
</ion-content>
<app-footer></app-footer>